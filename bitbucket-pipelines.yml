image: node:18

pipelines:
  default:
    - parallel:
        - step:
            name: "Build Frontend"
            caches:
              - node
            script:
              - cd frontend
              - npm install
              - npm run build
            artifacts:
              - frontend/build/**
        - step:
            name: "Test Backend"
            script:
              - cd backend
              - python -m pip install -r requirements.txt
              - pytest

    - step:
        name: "Deploy to Production"
        deployment: production
        trigger: manual
        script:
          - echo "Deploy frontend build to hosting..."
          - echo "Deploy backend to server..."
